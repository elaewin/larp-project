{% extends "base.html" %} {% block content %}

  <h2 class="centered">Past Games</h2>
  {% comment %} here is where the query happens {% endcomment %}

  {% for event in events %}
      <div class="post">
        <h3 class="event_list_header"><a href="{% url 'event_detail' event.pk %}">{{ event }}</a></h3>
        <p class="byline">
          Game Date: {{ event.date }}<br />
          Hosted by {{ event.creator }}<br />
          Game System: <a href=" {{ event.rules_url }} ">{{ event.game_system }}</a>
        </p>
        <div class="post-body">
          <p>Description: 
          {% with preview=event.description|safe %}
          {{ preview|truncatechars_html:150 }}
          {% endwith %} <a href="{% url 'event_detail' event.pk %}"><em>(full details)</em></a></p>
        {% if event.tags.all|length > 0 %}
          <ul class="tags">
              <li><strong>Tags:</strong></li>
            {% for tag in event.tags.all %}
              <li>{{ tag }},</li>
            {% endfor %}
          </ul>
        {% endif %}
        </div>
      </div>

  {% endfor %}
{% endblock %}